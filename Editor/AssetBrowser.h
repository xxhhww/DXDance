#pragma once
#include "UI/PanelWindow.h"
#include "UI/Child.h"
#include "UI/TreeNode.h"
#include "UI/Columns.h"
#include <filesystem>

namespace App {
	/*
	* 资产浏览器
	*/
	class AssetBrowser : public UI::PanelWindow {
	public:
		/*
		* 资产浏览器构造函数
		*/
		AssetBrowser(
			const std::string& title = "",
			const std::string& enginePath = "",
			const std::string& assetPath = "",
			bool opened = true,
			const UI::PanelWindowSettings& panelSetting = UI::PanelWindowSettings{}
		);

		/*
		* 资产浏览器析构函数
		*/
		~AssetBrowser();

	private:
		/*
		* 递归函数，处理项目路径下的文件夹或者目录
		*/
		void BuildVirtualFs(UI::TreeNode* root, std::filesystem::directory_entry entry, bool isEngineItem = false);

		/*
		* 绘制资产网格
		*/
		void BuildAssetGrid();
	private:
		std::string		mEnginePath;
		std::string		mAssetPath;
		std::string		mCurrentPath;
		UI::Child*		mVirtualFs{ nullptr };
		UI::Child*		mAssetGrid{ nullptr };
		UI::Columns*	mAssetGridColumns{ nullptr };
		const float		mGridPadding = 16.0f;
		const float		mThumbnailSize = 96.0f;
	};
}